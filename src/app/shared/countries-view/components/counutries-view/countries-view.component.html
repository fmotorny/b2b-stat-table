<div class="tools">
  <mat-form-field appearance="outline">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Searching by value">
  </mat-form-field>

  <mat-form-field class="selectColumn" *ngIf="tableClass === 'table-view'" appearance="outline">
    <mat-label>Hide/Show Columns</mat-label>
    <mat-select [formControl]="columns" multiple>
      <ng-container *ngFor="let column of cloneColumnList">
        <mat-option *ngIf="column !='name' && column !=='flag'" [value]="column">{{column}}</mat-option>
      </ng-container>
    </mat-select>
  </mat-form-field>


<!--  <mat-form-field class="selectColumn" appearance="outline">-->
<!--    <mat-label>Countries</mat-label>-->
<!--    <mat-select #select *ngIf="isFavoriteList" [formControl]="countries" multiple>-->
<!--      <ng-container *ngFor="let country of this.dataSource.data">-->
<!--          <mat-option [value]="country">{{country.name}}</mat-option>-->
<!--      </ng-container>-->
<!--    </mat-select>-->
<!--    <mat-select *ngIf="!isFavoriteList" [formControl]="countries" multiple>-->
<!--      <ng-container *ngFor="let country of this.dataSource.data">-->
<!--        <mat-option [value]="country">{{country.name}}</mat-option>-->
<!--      </ng-container>-->
<!--    </mat-select>-->
<!--  </mat-form-field>-->

  <div class="buttons">
    <mat-button-toggle-group (change)="addClassToTable(group.value)" #group="matButtonToggleGroup">
      <mat-button-toggle [checked]="true" value="table-view">
        <mat-icon aria-hidden="false">view_list</mat-icon>
      </mat-button-toggle>
      <mat-button-toggle value="block-view">
        <mat-icon aria-hidden="false">view_module</mat-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>
</div>


<mat-table [class.transformed]="isMaxInView && tableClass === 'table-view'" [ngClass]="tableClass" matSort  [dataSource]="dataSource" class="mat-elevation-z8">


  <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      <strong>{{column}}</strong>
    </mat-header-cell>
    <mat-cell (click)="tableClass === 'block-view' ? callAdditionalInfo(element) : ''" [class.ico-cell]="column === 'flag'" *matCellDef="let element">
      <ng-container *ngIf="column === 'flag'">
          <div *ngIf="tableClass === 'block-view'" class="nameCountry">
            {{element.name}}
          </div>
          <img width="30" src="{{element[column]}}" alt="">
      </ng-container>
      <ng-container *ngIf="column !== 'flag' && column !== 'currencies' && column !== 'languages' && column !== 'translations' && column !== 'buttons'">
        {{element[column]}}
      </ng-container>
      <ng-container *ngIf="column === 'currencies' || column === 'languages'">
        <div style="display: flex; flex-flow: column;">
          <div *ngFor="let listEl of element[column]; let i = index">
            {{i + 1}}
            <div *ngFor="let item of listEl | keyvalue">
              <strong>{{item.key}}</strong>: {{item.value}}
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="column === 'translations'">
        <div style="display: flex; flex-flow: column;">
          <div *ngFor="let item of element[column] | keyvalue">
            {{item.key}}: {{item.value}}
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="column === 'buttons'">
        <button *ngIf="!isFavoriteList" style="line-height: 19px;
    padding: 5px 20px;" (click)="addCountryToList(element)" mat-flat-button color="primary">Add to <br> Favorite list</button>

        <button *ngIf="isFavoriteList" style="line-height: 19px;
    padding: 5px 20px;" (click)="removeCountryFromList(element.name)"  mat-flat-button color="primary">Remove</button>
      </ng-container>
    </mat-cell>
  </ng-container>

  <mat-header-row [ngStyle]="{'width': isMaxInView &&  tableClass === 'table-view'? baseWidth + '%' : '100%' }" *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row class="rowTest" [ngStyle]="{'width': isMaxInView && tableClass === 'table-view' ? baseWidth + '%' : '100%' }" *matRowDef="let row; columns: displayedColumns;"></mat-row>


</mat-table>

<mat-paginator [pageSize]="10"></mat-paginator>
